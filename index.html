<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data:; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <script src="lib/onsenui/js/onsenui.min.js"></script>
    <script src="lib/onsenui/js/jquery-3.1.0.min.js"></script>

    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />

    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="lib/onsenui/css/onsenui.css">
    <link rel="stylesheet" href="lib/onsenui/css/onsen-css-components.css">
    <link rel="stylesheet" href="css/style.css">
<style>
  .sub_line_item {
    font-size: .7em;
    font-style: italic;
    color: #333;
    display:block;
  }
</style>
    <script>

    document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady() {
      console.log('in onDeviceReady.');
      /*
      var model = device.model;
      var plat = device.platform;
      var uuid = device.uuid;
      var vers = device.version;
      console.log(device.cordova);
      */
      // HANDLE DEVICE BEING OFFLINE/NO NETWORK CONNECTION
              document.addEventListener("offline", onOffline, false);
              document.addEventListener("online", onOnline, false);

              function onOffline() {
                  // Handle the offline event
                  $("#nextEvent").html("THIS IS OFFLINE <b>CONTENT.</b>");
              }







              function onOnline() {
                  // Handle the online event
                  console.log('onOnline exec.');
//              $(document).ready(function(){
              //	function checkForExistingMember(thisMember,popDiv,num) {
              		var returnMessage = ""; // Global scope
              	$("#jsonReturnDiv").html('Retrieving data...');
              	$.ajax({url:"http://www.okeeski.com/members/get_tourneys_json.php",data:{ events: 'events'},type:'POST', dataType: 'json',success:function(json_Obj) {

              // SET THE NEXT UPCOMING EVENT ON THE START PAGE
              var date = new Date();

              date.setDate(date.getDate() - 1);

              //var today = new Date();
              var dd = date.getDate();
              //console.log(today);
              var mm = date.getMonth()+1; //January is 0!
              //console.log(dd);
              var yyyy = date.getFullYear();
              if(dd<10){
                  dd='0'+dd
              }
              if(mm<10){
                  mm='0'+mm
              }
              var today = mm+'/'+dd+'/'+yyyy;

                  var nextEvent = "<div id='upEvt'>Upcoming Events</div>";
                  var x=1;
                  for(j = 0; j < json_Obj.length; j++) {
                    if (today < json_Obj[j].start_date && x < 4) {
                        var date = new Date(json_Obj[j].start_date);
                        var d = date.toDateString();
                        nextEvent  += "<div class='eventItem'><div><b>" + d + "</b></div>";
                        nextEvent  += "<div>" + json_Obj[j].post_title + "</div>";
                        nextEvent  += "</div>";
                        x++;
                    } // END IF
                  } // END FOR LOOP
                  $("#nextEvent").html(nextEvent);
                  returnMessage = 'SUCCESS.';

                    var out = "<ons-list>";
                        out += "<ons-list-header>Schedule of Events</ons-list-header>";
                    var i;
                    for(i = 0; i < json_Obj.length; i++) {
                      //console.log(json_Obj[i].event_type);
                        out += '<ons-list-item modifier="tappable" category="'+json_Obj[i].event_type+'">';

                        var icon='';
                        if (json_Obj[i].event_type=='slalom') icon='images/slalom.jpg';//'images/work.jpg'
                        else if (json_Obj[i].event_type=='3event') icon='images/3event.png';
                        else if (json_Obj[i].event_type=='meeting') icon='images/meeting.png';
                        else if (json_Obj[i].event_type=='work') icon='images/work.png';
                        else if (json_Obj[i].event_type=='clinic') icon='images/clinic.png';
                        else icon='images/null.png';

                        out += '<div class="left">';
                        //out += icon;
                        //out += '<img class="list__item__thumbnail" src="images/work.jpg">';
                        out += '<img class="list__item__thumbnail" src="' + icon + '">';
                        //console.log('<img class="list__item__thumbnail" src="'+icon+'">');
                        out += '</div>';

                        out += '<div class="center">';
                        out += '<span class="list__item__title">' + json_Obj[i].post_title + '</span>';
                        out += '<span class="list__item__subtitle">' + json_Obj[i].start_date;
                        //console.log(json_Obj[i].start_date + ' ' + json_Obj[i].end_date);
                        //console.log(json_Obj[i].start_date.localeCompare(json_Obj[i].end_date ) );
                        if (json_Obj[i].start_date.localeCompare(json_Obj[i].end_date) === 0 )   {
                          //alert(json_Obj[i].start_date.localeCompare(json_Obj[i].end_date));
                          out += ' - ' + json_Obj[i].end_date;// + '</span>';
                          //console.log("NOT 0 " + json_Obj[i].start_date.localeCompare(json_Obj[i].end_date));
                        } else {
                          //alert(' IN 0');
                          //out += '</span>';
                          //console.log("IS 0 " + json_Obj[i].start_date.localeCompare(json_Obj[i].end_date));
                        }
                        out += ' <i>(' + json_Obj[i].start_time + ' - ' + json_Obj[i].end_time + ')</i></span>';
                        if (json_Obj[i].link != '' ) {
              out += '<div><ons-button><a href="#" style="text-decoration: none;color:#fff;" onclick="window.open(\'' + json_Obj[i].link + '\', \'_system\')";>Register</a></ons-button></div>';
                          // BELOW WORK, displays events
                          //out += '<div><ons-button><a target="blank" style="text-decoration: none;color:#fff;" href="' + json_Obj[i].link + '">Register</a></ons-button></div>';

                        }
                        out += '</div>';
                        if (json_Obj[i].post_content != null) {
                          str=json_Obj[i].post_content;
                          //out += '<i>' + str.replace(/\[[^)]+\]/,"") + '</i><p>';
                          out += '<div style="display:none;">' + str.replace(/\[[^)]+\]/,"") + '</div>';
                        } else {
                          str='';
                        }
                        out += '</ons-list-item>';
                    } // END FOR LOOP
                    out +="</ons-list>";
                    document.addEventListener("init", function(event) {
                      if (event.target.id == "page2") { // THIS enables scope for the page.
                        document.getElementById("jsonReturnDiv").innerHTML = out;
                      }
                    }, false);
                    //document.getElementById("demo").innerHTML = out;

              		}, // END AJAX SUCCESS
                  error: function(json_Obj){
              					document.getElementById("jsonReturnDiv").innerHTML = 'ERROR.';
              				//return false;
              		}, // END AJAX ERROR
                  complete: function(json_Obj){
              				if ( (typeof returnMessage == "undefined" || returnMessage=='') ) {
              		        document.getElementById("jsonReturnDiv").innerHTML = 'NO DATA RETURNED.';
              				} else {
              					console.log(returnMessage);
              				}
              	} // END AJAX COMPLETE
              }); // END AJAX REQUEST OBJECT
            //  } // END ONLINE READY
//          }); // END DOCUMENT.READY
        } //END FUNCTION onOnline

    if (navigator.connection.type.toLowerCase() != 'none') {
      onOnline();
      console.log('online on init');
    } else {
      onOffline();
      console.log('offline on init');
    }

} // END onDeviceReady



        ons.ready(function() {
            console.log("Onsen UI is ready!!!!");
            onOnline();
        });
//}


document.addEventListener('init', function(event) {
  var page = event.target;
  if (page.id === 'page1') {
    page.querySelector('#push-button').onclick = function() {
      document.querySelector('#myNavigator').pushPage('page2.html', {data: {title: 'Events'}});
      //document.querySelector('#myNavigator').pushPage('page2.html');
    };

    page.querySelector('#push-page3').onclick = function() {
      document.querySelector('#myNavigator').pushPage('page3.html', {data: {title: 'Join'}});
      //document.querySelector('#myNavigator').pushPage('page2.html');
    };
  } else if (page.id === 'page2') {
    //alert('here');
    page.querySelector('ons-toolbar .center').innerHTML = page.data.title;
    //document.querySelector('#myNavigator').pushPage('page1.html');
  }




if (page.id === 'page1') {
page.querySelector('#loadData').onclick = function() {
  $('#spinner').show();
  $('#loadData').text('Loading...');
  $('#first_name, #last_name, #member_type, #expire_date, #ski_eligable, #valid_dob, #is_minor, #ski_age').html('');
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
  if (xhttp.readyState == 4 && xhttp.status == 200) { // 200 indicates success

      //xmlDoc = xhttp.responseXML; // get as XML object THIS VARIABLE HOLDS THE RESPONSE FROM THE XMLHttpRequrest
      var xmlDoc = jQuery.parseXML(xhttp.responseText); // GET response as text and create xml object
      //alert((new XMLSerializer()).serializeToString(xmlDoc));
      //alert(xhttp.responseText);
      var memberFound=xmlDoc.getElementsByTagName("MemberFound")[0].childNodes[0].nodeValue;

      if (memberFound.toLowerCase() != 'no'){
          // Next several lines populates javascript variables from the responseXML
          usaws_r = "";
          fname_r = "";
          lname_r = "";
          member_type = "";
          expire_date = "";
          ski_eligable_r = "";
          valid_dob_r = "";
          is_minor_r = "";
          var usaws_r=xmlDoc.getElementsByTagName("MemberID")[0].childNodes[0].nodeValue;
          var fname_r=xmlDoc.getElementsByTagName("MemberFirst")[0].childNodes[0].nodeValue;
          var lname_r=xmlDoc.getElementsByTagName("MemberLast")[0].childNodes[0].nodeValue;
          var member_type_r=xmlDoc.getElementsByTagName("MembershipType")[0].childNodes[0].nodeValue;
          var expire_r=xmlDoc.getElementsByTagName("MemberExpireDate")[0].childNodes[0].nodeValue;
          var ski_eligable_r=xmlDoc.getElementsByTagName("CanSkiTour")[0].childNodes[0].nodeValue;
          var valid_dob_r=(xmlDoc.getElementsByTagName("DOB_validated")[0].childNodes[0]) ? (xmlDoc.getElementsByTagName("DOB_validated")[0].childNodes[0].nodeValue) : '';
          var is_minor_r=(xmlDoc.getElementsByTagName("Minor")[0].childNodes[0]) ? (xmlDoc.getElementsByTagName("Minor")[0].childNodes[0].nodeValue) : '';
          var ski_age_r=xmlDoc.getElementsByTagName("MembAge")[0].childNodes[0].nodeValue;


          // And this jQuery populates the form elements with the variables from above
          /*
          $('input[name="user_login"]').val(usaws_r);
          $('input[name="user_login"]').attr("disabled", "disabled");
          $('#edit_usaws').show();

          $('#first_name').show();
          $('#last_name').show();
          $('#expire_date').show();
          $('#member_type').show();
          $('#ski_eligable').show();
          $('#valid_dob').show();
          $('#is_minor').show();
          $('#ski_age').show();
          */
          $('#first_name').html('<b>First Name:</b>' + fname_r);
          $('#last_name').html('<b>Last Name:</b>' + lname_r);
          $('#member_type').html('<b>USAWS Member Type:</b>' + member_type_r);
          $('#expire_date').html('<b>USAWS Expire Date:</b>' + expire_r);
          $('#ski_eligable').html('<b>Eligable to ski:</b>' + ski_eligable_r);
          if (valid_dob_r.length>0) { $('#valid_dob').html('<b>Valid DOB:</b>' + valid_dob_r) }
          $('#is_minor').html('<b>Minor:</b>' + is_minor_r);
          $('#ski_age').html('<b>Age:</b>' + ski_age_r);
          //$('#request_data').hide();
          $('#spinner').hide();
          $('#loadData').text('Load Data');
        } else {
          // DISPLAY MEMBER NOT FOUND MESSAGE
          $('#first_name').html('<b>NOT FOUND:</b>' + fname_r);
          $('#spinner').hide();
          $('#loadData').text('Load Data');
          /*
          $('#member_found').show();
          $('#member_found').html('<span style="color:#f00">Member Not Found. Re-enter USAWS ID.</span>');
          */
        }
      } // END IF READYSTATE 4 and STATUS 200
    }; // END xhttp.onreadystatechange

 //JS VERSION OF SETTING TODAYS DATE
    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth()+1; //January is 0!
    var yyyy = today.getFullYear();
    if(dd<10) { dd='0'+dd }
    if(mm<10) {mm='0'+mm }
    today = mm+'/'+dd+'/'+yyyy;
    console.log(today);
  // THE BELOW WORKS for sending as string via application/x-www-form-urlencoded which is a typical post type
  // BELOW gets the usaws variable put in by the user and sends the request via XMLHttpRequrest
  var memberID = $('input[name="usaws_id"]').val();
  var memberDOB='02/28/1969';
  //var memberMinorByDate='<?php echo date('m/d/Y'); ?>';
  var memberMinorByDate=today;//'03/01/2023';
  //var memberMinorByDate='12/31/2015'; //<IsMinor_AsOf_Date>"+memberMinorByDate+"</IsMinor_AsOf_Date>

  if (memberID.length==9) {
    theRequest="<USAWaterski><MemberStatus><ClubAccessCode>WPB001</ClubAccessCode><MemberID>"+memberID+"</MemberID><Member_DOB_ForValidation>"+memberDOB+"</Member_DOB_ForValidation><IsMinor_AsOf_Date>"+memberMinorByDate+"</IsMinor_AsOf_Date></MemberStatus></USAWaterski>";
    xhttp.open("POST", "http://www.okeeski.com/members/curl_proxy.php", true);
    xhttp.send(theRequest);
  } else {
    $('#first_name').html('<b>Invalid number</b>' + fname_r);
    /*
    $('#member_found').html('<span style="color:#f00">9 digit USA Water Ski Number required.</span>');
    $('#member_found').show();
*/
    //alert('invalid data');
    $('#spinner').hide();
    $('#loadData').text('Load Data');
    return false;
  }
};

}

});

</script>

<script>
// AJAX CALL TO GET EVENTS
//ons.ready(function() {





</script>




<!-- FOR WEATHER DATA -->
<script language="javascript" type="text/javascript">
<!--
//Browser Support Code : FOR OKEE WEATHER STATION DATA
function ajaxFunction(){
	var ajaxRequest;  // The variable that makes Ajax possible!

	try{
		// Opera 8.0+, Firefox, Safari
		ajaxRequest = new XMLHttpRequest();
	} catch (e){
		// Internet Explorer Browsers
		try{
			ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
		} catch (e) {
			try{
				ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
			} catch (e){
				// Something went wrong
				alert("Your browser broke!");
				return false;
			}
		}
	}

// Create a function that will receive data sent from the server
ajaxRequest.onreadystatechange = function(){
	if(ajaxRequest.readyState == 4){
		document.getElementById('okeeWeather').innerHTML = ajaxRequest.responseText;
		//document.myForm.time.value = ajaxRequest.responseText;
	}
}
ajaxRequest.open("GET", "http://www.okeeski.com/data/scpbajax_datacall.php", true);
ajaxRequest.send(null);

}

	self.onload=ajaxFunction();
	self.setInterval(function(){ajaxFunction()},4000);


</script>
<!-- END FOR WEATHER DATA -->
<style>
#clubName {
  color:#fff;
  font-family:serif;
  font-style: italic;
  font-weight: bold;
  font-size: 1.8em;
  text-align: center;
  background-color: rgba(24,103,194,0.40);
  border-bottom: 1px solid rgba(24,103,194,0.80);
  padding:.4em 0 .4em 0;
  text-shadow: .05em .05em #000000;
}
#clubLogo {
  position: absolute;
  bottom: 0;
  left:0;
  width:100%;
  opacity:0.1;
  display:inline-block;
  z-index: -1;
}
#usaws_lookup {
  display:inline-block;
}
#upEvt {
  font-family:sans-serif;
  font-size: 1.1em;
  color: #fff;
  margin-top:1.2em 0 .5em 0;
  background-color: rgba(24,103,194,0.81);
  padding: .6em 0 .6em 0;
}
.eventItem {
  background-color: rgba(24,103,194,0.10);
  padding:.2em;
  border-bottom: 1px solid rgba(24,103,194,0.80);
}
#okeeWeather {
  font-family: sans-serif;
  font-variant: small-caps;
  font-size: 1.1em;
  font-weight: bold;
  color: #555;
  margin:0 0 .5em 0;
}
#push-button {
  margin-top:.8em;
}

#airF, #waterF, #windS, #windD {
  display:inline-block;
  padding:0 .3em 0 0;
}
</style>






<!-- PAGE 3 SCRIPTS -->
<script>

date = new Date();
var dateHyphen=date.getFullYear()+'-' + (date.getMonth()+1) + '-'+date.getDate();
var dateSlash=date.getFullYear()+'/' + (date.getMonth()+1) + '/'+date.getDate();

// GENERATE CAPTCHA VALUES
var a=Math.floor((Math.random() * 10) + 1);
var b=Math.floor((Math.random() * 10) + 1);

function checkEmailAddress (emailAddress) {
  if (isValidEmailAddress(emailAddress)) {
    $('#emailReturnDiv').removeClass('error');
    $('#emailReturnDiv').show();
    //$('#email_address_hd1').val(emailAddress);
    $('#emailReturnDiv').html('Please re-enter your email address below to confirm.')
    $('#email2').show();
    $('#email_address').prop("readonly", true);
    $('#email_address2').focus();
  } else {
    $('#emailReturnDiv').show();
    $('#emailReturnDiv').addClass('error');
    $('#emailReturnDiv').html('Not a properly formed email address.  Please re-enter.')
  }
}

function checkEmailAddress2 (emailAddress) {
  if ( emailAddress == $('#email_address').val() ) {
    $('#emailReturnDiv2').removeClass('error');
    $('#emailReturnDiv2').show();
    $('#email_address2').prop("readonly", true);
    fullName=$('#first_name_hd1').val().concat(" ".concat( $('#last_name_hd1').val() ) );
    //emailAddy=emailAddress;
    $('#section4Name').html(fullName);
    $('#section4Email').html(emailAddress);
		$('#email_address_hd1').val(emailAddress);
    //email_address_hd1
		if ( $('#li_s3').display='none' ) {
			$('#li_s3').show();
		}
    $( "#section3" ).click();
/* change to new section 3 below
		if ( $('#li_s3').display='none' ) {
			$('#li_s3').show();
		}
    $( "#section3" ).click();
		$('#captcha').focus();
*/
  } else {
    $('#emailReturnDiv2').show();
    $('#emailReturnDiv2').addClass('error');
    $('#emailReturnDiv2').html('Email addresses do not match.  Please re-enter.')
		$('#email_address').prop("readonly", false);
		$('#email_address2').prop("readonly", false);
		return false;
  }
}

function isValidEmailAddress(emailAddress) {
    var pattern = /^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;
    return pattern.test(emailAddress);
};

function toggleCollegeName(val) {
	if (val=='Y') {
		$('#collegeNameID').css('display','inline-block');
	} else {
		$('#college').val('');
		$('#collegeNameID').css('display','none');
	}
}

function validateCollegiate() {
	var coll_yn= $("input[name='collegiate']:checked").val();
	var collName= $("#college").val();
	if (typeof coll_yn === "undefined") {
		$('#collegeReturnDiv').show();
    $('#collegeReturnDiv').addClass('error');
    $('#collegeReturnDiv').html('Collegiate Yes or No required.');
	} else if (coll_yn=='Y' && collName.length<1) {
		$('#collegeReturnDiv').show();
    $('#collegeReturnDiv').addClass('error');
    $('#collegeReturnDiv').html('Please specify a college.');
	} else { // ALL good, proceed...
		$('#collegeReturnDiv').hide();
		$('#collegeReturnDiv').html('');
		if ( $('#li_s4').display='none' ) {
			$('#li_s4').show();
		}
    $( "#section4" ).click();
		$('#captcha').focus();
	}
}

function submitForm() {


	var posting = $.post( 'http://www.okeeski.com/members/new_member_insert_service.php', {
		usaws_id_hd1: $('#usaws_id_hd1').val() ,
		usaws_member_type_hd1: $('#usaws_member_type_hd1').val() ,
		usaws_expire_hd1: $('#usaws_expire_hd1').val() ,
		usaws_is_minor_hd1: $('#usaws_is_minor_hd1').val() ,
		age_hd1: $('#age_hd1').val() ,
		first_name_hd1: $('#first_name_hd1').val() ,
		last_name_hd1: $('#last_name_hd1').val() ,
		usaws_sport_div_1_hd1: $('#usaws_sport_div_1_hd1').val() ,
		usaws_sport_div_2_hd1: $('#usaws_sport_div_2_hd1').val() ,
		email_address_hd1: $('#email_address_hd1').val() ,
		collegiate: $("input:radio[name=collegiate]:checked").val(),
		college: $('#college').val() ,
	} , function(data,status){
            //alert("Data: " + data + "\nStatus: " + status);
						if (status=='success') {
							//document.write(data);
					//		if(typeof data !== 'undefined'){ // alert for user that they appear to have already paid for the current membership year
									$("#thankYou").html(data);
									$("#thankYou").css("display","block");
									$('html, body').animate({ scrollTop: 0 }, 'fast');
						//	};

						} else {
							alert (data);
						}
  });



}


function validateForm() {
	// Check to verify there is USAWS_ID info returned
	if ($('#usaws_id_hd1').val().length === 0) {
		alert ("No USAWS ID submitted");
		return false;
	}
	// Check to verify email address is entered and valid
	if ( $('#email_address_hd1').val() =='' ) {
		alert ("Email address not valid or does not match.");
		return false;
	} else {
	/*
	$("#usaws_id_hd"+num).val('');
	$("#first_name_hd"+num).val('');
	$("#last_name_hd"+num).val('');
	$("#usaws_member_type_hd"+num).val('');
	$("#usaws_expire_hd"+num).val('');
	$("#usaws_is_minor_hd"+num).val('');
	$("#usaws_ski_year_age_hd"+num).val('');
	*/

  	submitForm();
	}
//	} else {
//		alert('Confirmation failed.  Please retry.')
//	}
}

function validateCaptcha() {
	var c=a+b;
	if (c==$('#captcha').val() ) {
		validateForm();
	} else {
		alert('Confirmation code failed.  Please re-enter code number.');
		return false;
	}
	/*
var posting = $.post( 'http://www.okeeski.com/members/validateCaptcha.php', { captcha: $('#captcha').val() } );

  posting.done(function( data ) {
    if (data=='true') {
			validateForm();
		} else {
			alert('Confirmation code failed.  Please re-enter code number.');
			return false;
		}
  });*/
}

// AJAX CALL TO CHECK FOR EXISTING MEMBER

	function checkForExistingMember(thisMember,popDiv,num) {
		var returnMessage = ""; // Global scope
	$(popDiv).html('Retrieving data...');
	$.ajax({url:"http://www.okeeski.com/members/is_scpb_member_json.php",data:{ usaws_id: thisMember},type:'POST', dataType: 'json',success:function(json_Obj) {
		//alert (typeof json_Obj);


			// Check to see if users SCPB account has expired
			if ( new Date(json_Obj[0].scpb_expiry_date) < dateHyphen  ) {  // EXPIRED
				returnMessage = "<div class='table_row font8em'>Hello, <b>" + json_Obj[0].first_name + " " + json_Obj[0].last_name + "</b>.<br />USAWS ID " + json_Obj[0].usaws_id + " has already created an account for Ski Club of the Palm Beaches, however it expired on " + json_Obj[0].scpb_expiry_date + ".  Please login to <a href='http://my.okeeski.com'>my.okeeski.com</a> and pay your annual dues to continue membership.  The email address used for this account is " + json_Obj[0].email_address + " .</div>";
			} else { // NOT Expired, so inform user to log in
				// use returned SCPB_expiry_date to determine if user is already an enrolled member or if expired, inform them to login and pay dues
				returnMessage = "<div class='table_row font8em'>Hello, <b>" + json_Obj[0].first_name + " " + json_Obj[0].last_name + "</b>.<br />USAWS ID " + json_Obj[0].usaws_id + " already has an active/paid Ski Club of the Palm Beaches account.  It expires on " + json_Obj[0].scpb_expiry_date + ".  Please login to <a href='http://my.okeeski.com'>my.okeeski.com</a> to view your account status.  The email address used for this account is " + json_Obj[0].email_address + " .</div>";
			}
			$("#li_s2,#li_s3,#li_s4").hide();
			//alert("returnMessage is populated:" + returnMessage);
			//return true;
		}, error: function(json_Obj){
					//alert("Error running ajax query." + typeof json_Obj);
					//loadDoc(thisMember,popDiv,num);
					//alert("returnMessage is empty:" );
					//loadDoc(thisMember,popDiv,num);
					//alert("In json_obj not found");
					//loadDoc(thisMember,popDiv,num);
				//return false;
		}, complete: function(json_Obj){
				if ( (typeof returnMessage == "undefined" || returnMessage=='') ) {
					loadDoc(thisMember,popDiv,num);
				} else {
					$(popDiv).html(returnMessage);
				}

	}});
}

function loadDoc(thisMember,popDiv,num) {
	$(popDiv).html('Retrieving data...');
// PUT IN CODE TO CHECK thisMember against existing members in SCPB database
	//checkForExistingMember(thisMember,popDiv);
	//return true;  // temporary to stop the rest of the script.

  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
  if (xhttp.readyState == 4 && xhttp.status == 200) { // 200 indicates success

			//xmlDoc = xhttp.responseXML; // get as XML object THIS VARIABLE HOLDS THE RESPONSE FROM THE XMLHttpRequrest
			var xmlDoc = jQuery.parseXML(xhttp.responseText); // GET response as text and create xml object
			//alert((new XMLSerializer()).serializeToString(xmlDoc));
			//alert(xhttp.responseText);
			var memberFound=xmlDoc.getElementsByTagName("MemberFound")[0].childNodes[0].nodeValue;

			if (memberFound.toLowerCase() != 'no'){
					// Next several lines populates javascript variables from the responseXML
					usaws_r = "";
					fname_r = "";
					lname_r = "";
					member_type = "";
					expire_date = "";
					ski_eligable_r = "";
					valid_dob_r = "";
					is_minor_r = "";
          usaws_sport_div_1_r = "";
          usaws_sport_div_2_r = "";
					var usaws_r=xmlDoc.getElementsByTagName("MemberID")[0].childNodes[0].nodeValue;
					var fname_r=xmlDoc.getElementsByTagName("MemberFirst")[0].childNodes[0].nodeValue;
					var lname_r=xmlDoc.getElementsByTagName("MemberLast")[0].childNodes[0].nodeValue;
					var member_type_r=xmlDoc.getElementsByTagName("MembershipType")[0].childNodes[0].nodeValue;
					var expire_r=xmlDoc.getElementsByTagName("MemberExpireDate")[0].childNodes[0].nodeValue;
					var ski_eligable_r=xmlDoc.getElementsByTagName("CanSkiTour")[0].childNodes[0].nodeValue;
					var ski_year_age_r=xmlDoc.getElementsByTagName("MembAge")[0].childNodes[0].nodeValue;
          var usaws_sport_div_1_r=xmlDoc.getElementsByTagName("SportsDivisionCode1")[0].childNodes[0].nodeValue;
          var usaws_sport_div_2_r=xmlDoc.getElementsByTagName("SportsDivisionCode2")[0].childNodes[0].nodeValue;


					//var valid_dob_r=xmlDoc.getElementsByTagName("DOB_validated")[0].childNodes[0].nodeValue;
					var valid_dob_r=(xmlDoc.getElementsByTagName("DOB_validated")[0].childNodes[0]) ? (xmlDoc.getElementsByTagName("DOB_validated")[0].childNodes[0].nodeValue) : '';
					//var valid_dob_r=xmlDoc.getElementsByTagName("DOB_validated")[0].childNodes[0].nodeValue;
					//var myVariable = (true condition) ? "true" : "false"
					//if(typeof value3 != "undefined")
					var is_minor_r=(xmlDoc.getElementsByTagName("Minor")[0].childNodes[0]) ? (xmlDoc.getElementsByTagName("Minor")[0].childNodes[0].nodeValue) : '';

					// check to see if membership EXPIRED.  If so, inform user, clear all fields.
					if (new Date(expire_r) <= dateSlash ) {
							//alert('Membership Number Expired on ' + expire_r);
							var returnString="<div class='table_row font8em'><br />Membership ID <b>" + usaws_r + "</b> expired on <span style='color:red'>" + expire_r + "</span><br />Please renew the membership before completing this form.</div>";
							$(popDiv).removeClass('error');
							$("#usaws_id_hd"+num).val('');
							$("#first_name_hd"+num).val('');
							$("#last_name_hd"+num).val('');
							$("#usaws_member_type_hd"+num).val('');
							$("#usaws_expire_hd"+num).val('');
							$("#usaws_is_minor_hd"+num).val('');
							$("#usaws_ski_year_age_hd"+num).val('');
							if (num==1) { // for spouse email onle...we don't capture child emails
								$("#family_email_address_"+num).val('');
								$("#family_email_address_"+num).parent().css('display','none');
							}
							$(popDiv).html(returnString);
							//$('#family0_d').change();
							return false;
						}

						// check to see if Child and is not a minor.  If so, inform user, clear all fields.
						if ( is_minor_r.toLowerCase()=='yes')  { // 2 ,3 , 4 are the child elements
								var returnString="<div class='table_row font8em'><br />Membership ID <b>" + usaws_r + "</b> is under the age of 18 and can not apply for membership.  Only individuals 18 or older can apply for membership.  After approval, a member can add a family, including spouse and children to the account under a family membership.</div>";
								$(popDiv).removeClass('error');
								$("#usaws_id_hd"+num).val('');
								$("#first_name_hd"+num).val('');
								$("#last_name_hd"+num).val('');
								$("#usaws_member_type_hd"+num).val('');
								$("#usaws_expire_hd"+num).val('');
								$("#usaws_is_minor_hd"+num).val('');
								$("#usaws_ski_year_age_hd"+num).val('');
                $(popDiv).addClass('error');
								$(popDiv).html(returnString);
								$(popDiv).change();
								return false;
							}

					// HAPPY PATH BELOW for valid usaws id
					var returnString="<div class='table_row font8em'><div class='leftCell'>Name:</div><div class='rightCell'>" + fname_r + " " + lname_r + "</div></div>";
							returnString+="<div class='table_row font8em'><div class='leftCell'>Type:</div><div class='rightCell'>" + member_type_r + "</div></div>";
							returnString+="<div class='table_row font8em'><div class='leftCell'>Expires:</div><div class='rightCell'>" + expire_r + "</div></div>";
							returnString+="<div class='table_row font8em'><div class='leftCell'>Minor:</div><div class='rightCell'>" + is_minor_r + "</div></div>";

							$("#usaws_id_hd"+num).val(usaws_r);
							$("#first_name_hd"+num).val(fname_r);
							$("#last_name_hd"+num).val(lname_r);
							$("#usaws_member_type_hd"+num).val(member_type_r);
							$("#usaws_expire_hd"+num).val(expire_r);
							$("#usaws_is_minor_hd"+num).val(is_minor_r);
							$("#age_hd"+num).val(ski_year_age_r);
              $("#usaws_sport_div_1_hd"+num).val(usaws_sport_div_1_r);
              $("#usaws_sport_div_2_hd"+num).val(usaws_sport_div_2_r);



          $("#request_data").css('display','none');
          $("#confirm_usaws").show();
          $("#edit_usaws").show();

					$(popDiv).removeClass('error');
					$(popDiv).html(returnString);
					$(popDiv).change();
					//$('#family'+num+'_d').change();
					//$('#family0_d').change();
					return true;
				} else {
					//$('#member_found').show();
					//$('#member_found').text('Member Not Found. Re-enter USAWS ID.');
					$(popDiv).addClass('error');
					$(popDiv).html("Member Not Found. Re-enter USAWS ID.");
					$(popDiv).change();
					//$('#family'+num+'_d').change();
					//$('#family0_d').change();
				}
			}
			if (xhttp.readyState == 2 && xhttp.status == 404) { // CONNECTION TO USAWS WEB SERVICE FAILED
				$(popDiv).html("Failed connecting to USAWS validation service.");
			}
		}; // END xhttp.readyState



	// THE BELOW WORKS for sending as string via application/x-www-form-urlencoded which is a typical post type
	// BELOW gets the usaws variable put in by the user and sends the request via XMLHttpRequrest
	//var memberID = $('input[name="user_login"]').val();
	//var memberDOB='';//'02/28/1969';
	var memberMinorByDate = dateHyphen; //'03/01/2016';
	//var memberMinorByDate='12/31/2015';
	if (thisMember.length==9 & !isNaN(thisMember)){

		theRequest="<USAWaterski><MemberStatus><ClubAccessCode>WPB001</ClubAccessCode><MemberID>"+thisMember+"</MemberID><Member_DOB_ForValidation></Member_DOB_ForValidation><IsMinor_AsOf_Date>"+memberMinorByDate+"</IsMinor_AsOf_Date></MemberStatus></USAWaterski>";
		xhttp.open("POST", "http://www.okeeski.com/members/curl_proxy.php", true);
		xhttp.send(theRequest);
	} else {
		//$('#member_found').text('9 digit USA Water Ski Number required.');
		//$('#member_found').show();
		//return false;
		$(popDiv).addClass('error');
		$(popDiv).html('9 digit USA Water Ski Number required.');
		$(popDiv).change();
	}
} // END loadDoc

</script>



<script>
$(document).ready(function(){
	// OPEN SECTION 1 WHEN beginButton clicked
	$("#beginButton").click(function() {
		if ( $('#li_s1').hasClass('ui-collapsible-collapsed')) {
			$( "#section1" ).click();
			$('#user_login').focus();
		}
	});


	$("#confirm_usaws").click(function() {
		if ( $('#li_s2').display='none' ) {
			$('#li_s2').show();
		}
	  $( "#section2" ).click();
	  $('#email_address').focus();
	  return false;
		});



		$('.ui-input-text').css("border-style","none"); // turn off outline on div...jqmobile issue

// Capture enter key click and submit
		$('#reg').keydown(function() {
			var key = event.which;
			if (key == 13) { // As ASCII code for ENTER key is "13"
				$('#request_data').click(); // Submit the form
			}
		});


// Function for EDIT BUTTON clicks
		$( "#edit_usaws" ).click(function() {

		  $('input[name="user_login"]').removeAttr("disabled");
		  $('input[name="user_login"]').val('');
			$('input[name="user_login"]').focus();

			// clear all values from form
			$('input[name="usaws_id_hd1"],input[name="first_name_hd1"],input[name="last_name_hd1"],input[name="usaws_member_type_hd1"],input[name="usaws_expire_hd1"],input[name="usaws_is_minor_hd1"],input[name="age_hd1"],input[name="usaws_sport_div_1_hd1"],input[name="usaws_sport_div_2_hd1"]').val('');

			// clear interface display or returned data
			$('#first_name,#last_name,#expire_date,#member_type,#ski_eligable,#valid_dob,#is_minor,#member_found,#ski_age,#edit_usaws').hide();
			$('#jsonReturnDiv').text('');

			$('.ui-input-text').css("border-style","none");
		  $('#request_data').show();
      $("#confirm_usaws").hide();
      $("#edit_usaws").hide();
		  return false;
		});

		// THIS SHOWS USER THANK YOU FOR SUBMITTING with full modal cover of page
		if(typeof thankYouString !== 'undefined'){ // alert for user that they appear to have already paid for the current membership year
				$("#thankYou").html(thankYouString);
				$("#thankYou").css("display","block");
		};

		$('#user_login').focus();

		// POPULATE CAPTCHA VALUES
		$('#valA').html(a);
		$('#valB').html(b);
}); // End document.ready


</script>
<!-- END PAGE 3 SCRIPTS ABOVE -->
<!-- PAGE 3 styles below -->



    <style>
    	.table_row {
    		display:table-row;
    		vertical-align:middle;
    	}
    	.leftCell {
    		display:table-cell;
    		text-align: right;
    		font-weight: bold;
    		vertical-align: middle;
    	}
    	.rightCell {
    		display:table-cell;
    		padding-left: .75em;
    		vertical-align: middle;
    	}

    	.reqs_div {
    		margin:0 0 .8em 1.5em;
    	}
    	.reqs_list {
    		margin:-.1em 0 0 0;
    	}
    	.wrapText {
    		white-space: normal;
    	}
    	.font8em {
    		font-size: .8em;
    	}
    	.font10em {
    		font-size: 1em;
    	}
    	.error {
    		color:#f00;
    	}
    	.checkmk {
    		color:#0A0;
    		padding-left:.8em;
    		font-size:1.0em;
    	}
    	/*
    	.ui-controlgroup-controls .ui-checkbox, .ui-controlgroup-controls .ui-radio, .ui-controlgroup-controls .ui-select {
        margin: -.65em 0em;
    	}
    */
    .fullModal {
    	display:none;
    	z-index: 101;
    	position:absolute;
    	top:0;
    	left:0;
    	width:100%;
    	height:100%;
    	background-color: rgba(20,20,20,.85);
    	vertical-align:middle;
    	text-align: center;
    	font-size: 1.1em;
    	font-weight: normal;
    	font-family: arial,sans-serif;;
    	padding-top:15%;
    	color:#fff;
    	text-shadow: none;
    }

    	#formCover {
    		display:none;
    		z-index: 100;
    		position:absolute;
    		top:0;
    		left:0;
    		width:100%;
    		height:100%;
    		background-color: rgba(170,170,170,.85);
    		vertical-align:middle;
    		text-align: center;
    		font-size: 1.5em;
    		font-weight: bold;
    		font-family: arial, sans-serif;;
    		padding-top:25%;
    		color:#000;
    	}

    </style>
    <style id="collapsible-list-item-style-flat">
      .ui-li-static.ui-collapsible > .ui-collapsible-heading {
        margin: 0;
      }

      .ui-li-static.ui-collapsible {
        padding: 0;
      }

      .ui-li-static.ui-collapsible > .ui-collapsible-heading > .ui-btn {
        border-top-width: 0;
      }

      .ui-li-static.ui-collapsible > .ui-collapsible-heading.ui-collapsible-heading-collapsed > .ui-btn,
      .ui-li-static.ui-collapsible > .ui-collapsible-content {
        border-bottom-width: 0;
      }

    	#section2_button2, #section3_button, #confirm_usaws, #beginButton, #submitButton, #request_data {
    		background-color: #DAFFE2;
    	}

    	div.background {
        background-image: url(/wp-content/uploads/2016/03/Okeeheelee-Sunset.jpg);
        border: 2px solid black;
    }

    div.transbox {
        margin: 0px;
        background-color: #ffffff;
        border: 1px solid black;
        opacity: .7;
        filter: alpha(opacity=70); /* For IE8 and earlier */
    }

    div.transbox p {
        margin: 0%;
        font-weight: bold;
        color: #000000;
    }
    #content {
    	background-image: url('/wp-content/uploads/2016/03/Okeeheelee-Sunset.jpg');
    }

    #introText {
    	padding:1%;
      background: rgba(255, 255, 255, 0.7);
    	border-radius: .4em;
    }

    </style>
<!-- PAGE 3 STYLES ABOVE -->
</head>
<body>


<ons-navigator id="myNavigator"  animation="slide" page="page1.html"></ons-navigator>

<!--
<ons-tabbar>
  <ons-tab label="Tab 1" page="page1.html" active></ons-tab>
  <ons-tab label="Tab 2" page="page2.html"></ons-tab>
</ons-tabbar>
-->




<!-- START page 1 -->
<ons-template id="page1.html">
  <ons-page id="page1">

    <!--<ons-toolbar>
      <div class="center">Page 1</div>
    </ons-toolbar>-->

  <div id='clubName'>Ski Club of the Palm Beaches</div>
    <div style="text-align: center; margin-top: 30px;">
      <!-- BELOW CODE IS FOR USAWS LOOKUP SERVICE -->
    <div id='usaws_lookup'>
    <form>
      <ons-input name='usaws_id' id='usaws_id' placeholder="USA Water Ski ID"  maxlength="9" modifier="underbar" float />
    </form>
  </p>
  <p style="margin-top: 30px;">
    <ons-button id='loadData'>Load Data</ons-button>
  </p>
  </div>
    <div id='usaws_results'>
      <div id='spinner' style='display:none;'><ons-progress-bar indeterminate></ons-progress-bar></div>
      <div id='first_name'></div>
      <div id='last_name'></div>
      <div id='expire_date'></div>
      <div id='member_type'></div>
      <div id='ski_eligable'></div>
      <div id='valid_dob'></div>
      <div id='is_minor'></div>
      <div id='ski_age'></div>
    </div>

  <div id='okeeWeather'></div>

    <div id='nextEvent'></div>
    <ons-button id="push-button">More 2017 Events</ons-button>


    <div> <ons-button id="push-page3">Join SCPB</ons-button></div>
    </div>


    <img src='images/club_logo.png' id='clubLogo' />
  </ons-page>
</ons-template>
<!-- END PAGE 1 -->










<!-- START page 2 -->
<ons-template id="page2.html">
  <ons-page id="page2">
    <ons-toolbar>
      <div class="left"><ons-back-button></ons-back-button></div>
      <div class="center">Page 2</div>
    </ons-toolbar>



      <div id='jsonReturnDiv'></div>
      <!--<div id='usaws_id_family0' class='rightCell'><button type="button" id='request_data'  data-mini='true' onclick="checkForExistingMember('700109164','#jsonReturnDiv',1)">Validate USAWS #</button>
      </div>-->



  </ons-page>

</ons-template>
<!-- END PAGE 2 -->








<!-- START page 3 -->

<ons-template id="page3.html">
  <ons-page id="page3">
    <ons-toolbar>
      <div class="left"><ons-back-button></ons-back-button></div>
      <div class="center">Page 3</div>
    </ons-toolbar>



    <div id='validationErrors' class='fullModal'>
Validation Errors:<ul><div id='errorText'></div></ul>
<p><button type='button' id='closeValidation' data-mini='true' data-inline='true'>Close</button></p>
</div>

<div id='thankYou' class='fullModal'></div>


<form method='post' id='newMemberAppForm' data-ajax="false">
<!--<form data-ajax="false">-->
<div data-role="content" data-theme="d" id="content">
 <!--<img src='/wp-content/uploads/2016/03/Okeeheelee-Sunset.jpg' />-->
 <div id='introText'>
    <h4 style='text-align:center';>Please use this form to request membership to Ski Club of the Palm Beaches (SCPB).</h4>
    <ul>
      <li>Only current USA Water Ski members are eligible to become SCPB members</li>
      <li>For family memberships, only one member will need to apply for membership at this time</li>
      <li>After review, you will receive an email to finish the application process at which time you may add family members</li>
    </ul>
    <div style='text-align:center;'>
    <button id='beginButton' style="display:inline-block; background-color:#DAFFE2;" type="button" data-mini='true' data-inline="true" data-icon='carat-r' data-ajax='true' data-iconpos='right'> START </button>
  </div>

  </div>

</div> <!-- END CONTENT -->


<ul data-role="listview" data-inset="true" data-shadow="false">
<li data-role="collapsible" data-iconpos="right" data-inset="false" id='li_s1'>

  <h2><span id='section1'>Step 1: Verify USA Water Ski Membership</span></h2>
<div class='wrapText'>

<div class='font10em'><br />Please enter your 9 digit USA Water Ski Number to verify eligibility.</div>


<div id='member_found' style='display:none'></div>
<form name='reg' id='reg'>
<div class='wrapText'>
  <div class='table_row'>
    <div class='leftCell'><input type='text' name='user_login' id='user_login' length='25' maxlength='9' value='000000007' placeholder='USA Water Ski ID'></div>
      <div id='usaws_id_family0' class='rightCell'><button type="button" id='request_data'  data-mini='true' onclick="checkForExistingMember(user_login.value,'#jsonReturnDiv',1)">Validate USAWS #</button>
    </div>
  </div>
</div>

<div id='jsonReturnDiv'></div>
<input type='hidden' name='usaws_id_hd1' id='usaws_id_hd1' value='' />
<input type='hidden' name='first_name_hd1' id='first_name_hd1' value='' />
<input type='hidden' name='last_name_hd1' id='last_name_hd1' value='' />
<input type='hidden' name='usaws_member_type_hd1' id='usaws_member_type_hd1' value='' />
<input type='hidden' name='usaws_expire_hd1' id='usaws_expire_hd1' value='' />
<input type='hidden' name='usaws_is_minor_hd1' id='usaws_is_minor_hd1' value='' />
<input type='hidden' name='age_hd1' id='age_hd1' value='' />
<input type='hidden' name='usaws_sport_div_1_hd1' id='usaws_sport_div_1_hd1' value='' />
<input type='hidden' name='usaws_sport_div_2_hd1' id='usaws_sport_div_2_hd1' value='' />

<div id='first_name'></div>
<div id='last_name'></div>
<div id='expire_date'></div>
<div id='member_type'></div>
<div id='ski_eligable'></div>
<div id='valid_dob'></div>
<div id='is_minor'></div>
<div id='ski_age'></div>
<p>
<button id='confirm_usaws' style='display:none; background-color:#DAFFE2' data-inline="true" data-mini='true'>Correct</button>
<button id='edit_usaws' style='display:none; background-color:#FDC8D4' data-inline="true" data-mini='true'>Not Correct. Re-enter</button>
</p>
</form>
</li>

<li data-role="collapsible" data-iconpos="right" data-inset="false" id='li_s2'>
<h2><span id='section2'>Step 2: Add Email Address</span></h2>
<div class='wrapText'>
<div class='table_row'>
  <div class='leftCell'><input type='text' name='email_address' id='email_address' value='plsantangelo@gmail.com'  maxlength='50' placeholder="email address" style='display:inline-block' /></div>
  <div id='email_address_div' class='rightCell'>
    <button id='section2_button' style="display:inline-block" type="button" data-mini='true' data-inline="true" data-icon='carat-r' data-ajax='true' onClick=checkEmailAddress(email_address.value)>Continue</button>
  </div>
</div>

<div id='emailReturnDiv'></div>
<input type='hidden' name='email_address_hd1' id='email_address_hd1' value='' />

<div class='table_row' id='email2' style='display:none'>
  <div class='leftCell'><input type='text' name='email_address2' id='email_address2' value='plsantangelo@gmail.com'  maxlength='50' placeholder="email address2" style='display:inline-block' /></div>
  <div id='email_address_div2' class='rightCell'>
    <button id='section2_button2' style="display:inline-block" type="button" data-mini='true' data-inline="true" data-icon='carat-r' data-ajax='true' onClick=checkEmailAddress2(email_address2.value)>Validate</button>
  </div>
</div>

<div id='emailReturnDiv2'></div>

</div>
</li>


<li data-role="collapsible" data-iconpos="right" data-inset="false" id='li_s3'>
<h2><span id='section3'>Step 3: Collegiate</span></h2>
<div class='wrapText'>
  <div class='font10em'><br />Are you a collegiate skier?</div> <div id='collegeReturnDiv' style='display:none;'></div>
<div class='table_row'>
    <div class='leftCell'><input type='radio' value='Y' name='collegiate' id='coll_yes' style='margin:auto' onClick=toggleCollegeName(this.value)>&nbsp;</div>
    <div class='rightCell' id='section3Yes' style='padding:.5em 0 0 2.2em; margin:auto'>Yes
      <div style='display:none' id='collegeNameID'><input type='text' name='college' id='college' value='NCSU'  maxlength='50' placeholder="College Name" /></div>
    </div>
</div>
<div class='table_row'>
    <div class='leftCell'><input type='radio' value='N' name='collegiate' id='coll_no' style='margin:auto' onClick=toggleCollegeName(this.value)>&nbsp;</div>
    <div class='rightCell' id='section3No' style='padding:.5em 0 0 2.2em; margin:auto'>No</div>
</div>
<div class='table_row'>
    <div class='leftCell'></div>
    <div class='rightCell'><button id='section3_button' style="display:inline-block;margin:.5em 0 0 2em;" type="button" data-mini='true' data-inline="true" data-icon='carat-r' data-ajax='true' onClick=validateCollegiate()>Continue</button>
    </div>
</div>
</li>


<li data-role="collapsible" data-iconpos="right" data-inset="false" id='li_s4'>
<h2><span id='section4'>Step 4: Confirmation</span></h2>
<div class='wrapText'>
<div class='table_row'>
    <div class='leftCell'>Name:</div>
    <div class='rightCell' id='section4Name'></div>
</div>
<div class='table_row'>
    <div class='leftCell'>Email:</div>
    <div class='rightCell' id='section4Email'></div>
</div>
<div class='table_row'>
    <div class='leftCell'></div>
    <div class='rightCell'>If the Name and Email address are correct, please enter the answer below to confirm you are not a robot.  After selecting 'Confirm' your data will submitted.</div>
</div>
<div class='table_row'>
    <div class='leftCell'><span id='valA'></span> + <span id='valB'></span></div>
    <div class='rightCell'>
        <input type='text' name='captcha' id='captcha' value='' maxlength='4' placeholder='answer' style='display:inline-block' />
    </div>
</div>
<div class='table_row'>
    <div class='leftCell'>
    <button id='submitButton' style="display:inline-block" type="button" data-mini='true' data-inline="true" data-icon='carat-r' data-ajax='false' onClick=validateCaptcha()>Confirm</button>
    </div>
  <div class='rightCell'></div>
</div>
</div>
</li>

</ul>
</form>



  </ons-page>

</ons-template>
<!-- END PAGE 3 -->




</body>
</html>
